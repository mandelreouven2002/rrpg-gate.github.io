<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שער להרפתקה - שער הכניסה לעולם משחקי התפקידים בישראל</title>
    <link rel="icon" type="image/x-icon" href="/rpg-game.png">

    <!-- Meta Tags for SEO and Social Media -->
    <meta name="description" content="מדריך מקיף למתחילים בעולם משחקי התפקידים בישראל: מה זה משחקי תפקידים, שיטות משחק, קהילות, כנסים, עסקים וחוגים. כל מה שצריך כדי להתחיל את ההרפתקה שלכם.">
    <meta name="keywords" content="rrpg, ראובן צירל מנדלוביץ', ראובן מנדלוביץ', משחקי תפקידים למען הקהילה, RRPG.TOP, פלאים, מבוכים ודרקונים, חרבות וכשפים, פאת'פיינדר, עולמות פראיים, פאת'פיינדר פראי, דרקוניקון, אייקון, משחקי תפקידים, RPG, לארפ, D&D, מבוכים ודרכונים, חרבות וכשפים, פאת'פיינדר, פלאים, קהילת RPG ישראל, כנסים, חוגים, פריק, הפונדק, העמותה למשחקי תפקידים, שער הרפתקה">
    <meta name="author" content="ראובן צירל-מנדלוביץ'">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="שער להרפתקה - שער הכניסה לעולם משחקי התפקידים בישראל">
    <meta property="og:description" content="מדריך מקיף למתחילים בעולם משחקי התפקידים בישראל: מה זה משחקי תפקידים, שיטות משחק, קהילות, כנסים, עסקים וחוגים. כל מה שצריך כדי להתחיל את ההרפתקה שלכם.">
    <meta property="og:url" content="https://www.rrpg.top">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="he_IL">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="שער הכניסה לעולם משחקי התפקידים בישראל">
    <meta name="twitter:description" content="מדריך מקיף למתחילים בעולם משחקי התפקידים בישראל: מה זה משחקי תפקידים, שיטות משחק, קהילות, כנסים, עסקים וחוגים. כל מה שצריך כדי להתחיל את ההרפתקה שלכם.">
    <!-- Chosen Palette: Warm Parchment -->
    <!-- Application Structure Plan: The SPA is designed as a task-oriented, non-linear guide for newcomers. Instead of a linear report, it uses a top navigation bar to allow users to jump to sections that answer their immediate questions (What is it? How do I start? Who is the community? Where do I buy things?). This structure facilitates exploration and quick access to relevant information. Key sections like "Game Systems" and "Community" use interactive, filterable card-based layouts to present dense information in a digestible, user-controlled manner, improving usability over a static document. -->
    <!-- Visualization & Content Choices: 
        - Report Info: TTRPG vs LARP -> Goal: Inform/Compare -> Viz: Side-by-side flexbox cards with Unicode icons (🎲, 🎭). Interaction: Subtle hover effects. Justification: Quickly establishes the two main types of RPGs for a beginner. Method: HTML/Tailwind.
        - Report Info: D&D, S&W, Pathfinder, Savage Worlds (now "פלאים") -> Goal: Compare/Inform -> Viz: Interactive cards and a Chart.js horizontal bar chart comparing complexity. Interaction: Clicking cards reveals details; chart provides a quick visual summary. Justification: Breaks down a complex choice into manageable pieces and offers both a quick visual heuristic (chart) and in-depth info (cards). Library: Chart.js.
        - Report Info: Organizations, Events, Groups, Businesses -> Goal: Organize/Directory -> Viz: Filterable grid of cards. Interaction: Filter buttons to show/hide categories, and now "Show first 3" to limit displayed items. Justification: Allows users to easily find specific resources without scrolling through irrelevant information, and provides a quick overview option. Method: JS data arrays + Tailwind grid.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Assistant', sans-serif; scroll-behavior: smooth; }
        .card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .nav-link { position: relative; overflow: hidden; }
        .nav-link::after { content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px; background-color: #4f46e5; transition: all 0.3s ease-in-out; transform: translateX(-50%); }
        .nav-link:hover::after { width: 100%; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .tab-btn.active { background-color: #4f46e5; color: white; }
        .details-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 700px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .contact-btn.active { background-color: #8b5cf6; color: white; } /* Purple for active contact button */
    </style>
</head>
<body class="bg-amber-50 text-stone-800">

    <header class="bg-white/80 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl md:text-3xl font-bold text-indigo-600">שער להרפתקה ⚔️</h1>
                <div class="hidden md:flex space-x-reverse space-x-8">
                    <a href="#intro" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">מה זה?</a>
                    <a href="#systems" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">בחירת שיטת משחק?</a>
                    <a href="#community" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">הקהילה</a>
                    <a href="#resources" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">איפה קונים ומשחקים?</a>
                    <a href="#closest-event" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">הכנס הקרוב ביותר</a>
                    <a href="#contact" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">צרו קשר</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-stone-300 rounded-md p-2 text-base text-stone-700">
                        <option value="#intro">מה זה?</option>
                        <option value="#systems">איך מתחילים?</option>
                        <option value="#community">הקהילה</option>
                        <option value="#resources">איפה קונים ומשחקים?</option>
                        <option value="#closest-event">הכנס הקרוב ביותר</option>
                        <option value="#contact">צרו קשר</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="intro" class="text-center mb-16 pt-10">
            <h2 class="text-5xl md:text-6xl font-bold mb-4 text-stone-900">ברוכים הבאים לעולם משחקי התפקידים</h2>
            <p class="max-w-3xl mx-auto text-xl text-stone-600 mb-8">
                מדריך זה הוא נקודת ההתחלה שלכם. כאן תגלו מהם משחקי תפקידים, תלמדו על שיטות המשחק המובילות ותמצאו את הקהילות, האירועים והחנויות שיעזרו לכם לצאת להרפתקה הראשונה שלכם.
            </p>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                    <h3 class="text-3xl font-bold mb-3 text-indigo-700 flex items-center justify-start"><span class="text-4xl ml-3"></span>משחקי תפקידים שולחניים (TTRPG)</h3>
                    <p class="text-lg text-stone-600">חוויה של סיפור שיתופי סביב שולחן (או אונליין). בעזרת דמיון, סט חוקים, קוביות, שחקנים ומנחה, אתם והחברים שלכם יוצרים יחד סיפור הרפתקאות ייחודי. הדגש הוא על יצירתיות, פתרון בעיות ועבודת צוות.</p>
                </div>
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                    <h3 class="text-3xl font-bold mb-3 text-teal-700 flex items-center justify-start"><span class="text-4xl ml-3"></span>משחקי תפקידים חיים (LARP)</h3>
                    <p class="text-lg text-stone-600">כאן אתם לא רק מספרים את הסיפור - אתם חיים אותו. המשתתפים מגלמים פיזית את הדמויות, לובשים תלבושות ופועלים במרחב אמיתי. חוויה תיאטרלית וסוחפת המדגישה אלתור ואינטראקציה פיזית.</p>
                </div>
            </div>
        </section>

        <section id="systems" class="mb-16 pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">בחירת שיטת משחק</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">כל הרפתקה צריכה חוקים. שיטת המשחק היא מערכת הכללים והעולם שבהם תפעלו. הנה כמה מהשיטות הפופולריות ביותר בישראל, שמתאימות במיוחד למתחילים.</p>

             <div class="mb-10">
                <div class="chart-container">
                    <canvas id="systemsChart"></canvas>
                </div>
                 <p class="text-base text-center text-stone-500 mt-2">תרשים זה מציג השוואה כללית של רמת מורכבות החוקים בין השיטות השונות, כדי לעזור לכם לבחור נקודת התחלה.</p>
            </div>

            <div id="systems-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            </div>
        </section>

        <section id="community" class="mb-16 pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">הקהילה: ארגונים, כנסים וקבוצות</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">אתם לא לבד! קהילת משחקי התפקידים בישראל חיה, תוססת ומלאה באנשים שישמחו לעזור לכם להתחיל. כאן תמצאו את הגופים המרכזיים שמניעים את התחביב.</p>
            <div class="flex justify-center space-x-4 space-x-reverse mb-8 flex-wrap items-center">
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="all">הכל</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="organization">ארגונים</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="event">כנסים ואירועים</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="group">קבוצות אונליין</button>
                <input type="text" id="community-search" placeholder="חיפוש..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2 mr-2 text-base">
            </div>
            <div id="community-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="community-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">טען עוד</button>
                <button id="community-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">צמצם</button>
            </div>
        </section>

        <section id="resources" class="pt-10 mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">איפה קונים ומשחקים?</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">צריכים קוביות, ספרי חוקים או מקום לשחק בו? מהחנויות המקצועיות ועד חוגי ילדים, אלו המקומות שיספקו לכם את כל מה שצריך.</p>
             <div class="flex justify-center space-x-4 space-x-reverse mb-8 flex-wrap items-center">
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="all">הכל</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="business">עסקים וחנויות</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="kids">חוגי ילדים</button>
                <input type="text" id="resources-search" placeholder="חיפוש..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 mb-2 mr-2 text-base">
            </div>
            <div id="resources-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="resources-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">טען עוד</button>
                <button id="resources-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">צמצם</button>
            </div>
        </section>

        <section id="closest-event" class="pt-10 mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-8 text-stone-900">הכנס הקרוב ביותר</h2>
            <div id="closest-event-container" class="max-w-md mx-auto">
                <!-- Closest event card will be rendered here by JavaScript -->
            </div>
        </section>

        <section id="contact" class="pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">צרו קשר</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">
                רוצים להוסיף קהילה נוספת? רוצים להוסיף את העסק שלכם? אולי מצאתם טעות?
                צרו קשר ונשתדל לעשות זאת בהקדם במידת ההתאמה.
            </p>

            <div class="flex justify-center space-x-4 space-x-reverse mb-8 flex-wrap">
                <button class="contact-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-purple-100 mb-2 text-base" data-platform="gmail">שלחו מייל דרך Gmail</button>
                <button class="contact-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-purple-100 mb-2 text-base" data-platform="outlook">שלחו מייל דרך Outlook</button>
                <button class="contact-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-purple-100 mb-2 text-base" data-platform="other">שלחו מייל דרך פלטפורמה אחרת</button>
            </div>

            <div id="contact-content" class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                <div id="gmail-outlook-form">
                    <textarea id="email-body-textarea" class="w-full p-3 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 mb-4 h-32 text-base" placeholder="כתבו כאן את תוכן המייל..."></textarea>
                    <button id="send-email-btn" class="bg-purple-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-purple-700 transition-colors duration-200 text-base">שלח מייל</button>
                </div>
                <div id="other-email-info" class="hidden text-center">
                    <p class="text-xl text-stone-700">
                        ניתן לשלוח מייל ישירות לכתובת:
                        <a href="mailto:gate@rrpg.top?subject=%D7%A4%D7%A0%D7%99%D7%99%D7%94%20%D7%91%D7%A0%D7%95%D7%A9%D7%90%20%D7%9C%D7%90%D7%AA%D7%A8%20%D7%A9%D7%A2%D7%A8%20%D7%94%D7%A8%D7%A4%D7%AA%D7%A7%D7%94" class="text-purple-600 hover:underline font-bold">gate@rrpg.top</a>
                    </p>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="text-center py-6 mt-12 bg-stone-200 border-t border-stone-300">
        <p class="text-base text-stone-600">נוצר באהבה עבור קהילת שחקני התפקידים בישראל ע"י <a href="https://rrpg.top" class="text-indigo-600 hover:underline">ראובן צירל-מנדלוביץ'</a>.</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const systemsData = [
        { 
            name: "מבוכים ודרקונים (D&D 5e)", 
            description: "המשחק הפופולרי ביותר בעולם, המציע חווית פנטזיה קלאסית. הוא משלב בצורה מופלאה אלמנטים של פנטזיה, קבלת החלטות אסטרטגית ושיתוף פעולה חברתי עמוק.",
            why: "נקודת הכניסה הסטנדרטית לתחביב. קל למצוא קבוצה וחומרים למתחילים, כמו 'ערכת ההתחלה' המצוינת.",
            complexity: 10,
            color: 'rgba(220, 38, 38, 0.7)',
            link: "https://www.dndbeyond.com/posts/1480-what-is-dungeons-dragons?srsltid=AfmBOopzDWbsP4e1DMGMjSrMehoPdOZu_TQuJxejwUSFIloncFH2nZBV"
        },
        { 
            name: "חרבות וכשפים", 
            description: "חזרה לשורשים של משחקי התפקידים, עם שיטה קלת-חוקים וגמישה המעודדת יצירתיות ואלתור מצד השחקנים והמנחה. הערכה למתחיל היא שער הכניסה לתחביב משחקי התפקידים, מיועדת ומותאמת לגילאי 8 ומעלה, 2-7 משתתפים, ומכילה את כל מה שצריך כדי ללמוד ולהתחיל לשחק בתחביב הטוב בעולם.",
            why: "מעולה למתחילים ולילדים. ערכת המתחיל בעברית מלמדת את המשחק צעד-אחר-צעד, כולל הרפתקת סולו.",
            complexity: 3,
            color: 'rgba(217, 119, 6, 0.7)',
            link: "https://swordsandwizardry.co.il/"
        },
        { 
            name: "פאת'פיינדר בעולמות פראיים", 
            description: "שילוב מנצח של עולם הפנטזיה העשיר של 'פאת'פיינדר' עם מנוע החוקים המהיר והקולנועי של 'עולמות פראיים'. בואו לשחק בשיטה וגלו עולם של הרפתקאות מסמרות שיער, אקשן מותח עצבים, וסיפורים נועזים שתזכרו שנים.",
            why: "הטוב משני העולמות - עומק עלילתי עם חוקים קלילים. ספר הבסיס בעברית כולל את כל מה שצריך כדי להתחיל לשחק.",
            complexity: 7,
            color: 'rgba(34, 197, 94, 0.7)',
            link: "https://pundak.games/savage-pathfinder/?srsltid=AfmBOorJInYvkaiDvnSU9dOQqbwjYhR4CbJucsDCyYcMt02V0Hnp0D3g"
        },
        { 
            name: "פלאים: גיבורי המחר", 
            description: "משחק תפקידים ישראלי המיועד לשחקנים מתבגרים או מתבגרים־לשעבר. פלאים מבוסס על המשחק המצליח Masks, בהשראת שיטת המשחק “מנוע האפוקליפסה” (ואנור/עולם המבוך). בפלאים אתם משחקים צוות של גיבורי־על צעירים המתמודדים עם קשיי הבגרות – ועם נבלי על! – בעיר בדיונית אותה יצרתם בעצמכם.",
            why: "שיטה ישראלית מקורית, קלה ללמידה ומתאימה למי שמחפש חוויה ייחודית של גיבורי-על עם עומק רגשי.",
            complexity: 5,
            color: 'rgba(255, 165, 0, 0.7)', // Orange color
            link: "https://store.roleplay.org.il/product/%D7%A4%D7%9C%D7%90%D7%99%D7%9D-%D7%92%D7%99%D7%91%D7%95%D7%A8%D7%99-%D7%94%D7%9E%D7%97%D7%A8/"
        }
    ];

    const communityData = [
        { name: "העמותה למשחקי תפקידים בישראל", type: "organization", description: "הגוף המרכזי לקידום התחביב. מארגנת כנסים (ביגור), תומכת ביוצרים ומפעילה את הוצאת 'גיבורים'.", link: "https://roleplay.org.il/", month: 0 },
        { name: "האגודה למד\"ב ופנטסיה", type: "organization", description: "שותפה בארגון כנסים מרכזיים כמו פסטיבל אייקון, ומקדמת את תרבות הז'אנר בישראל.", link: "https://www.sf-f.org.il/", month: 0 },
        { name: "הפונדק", type: "organization", description: "הקהילה המקוונת הוותיקה והמובילה, המארגנת של כנס 'דרקוניקון'. מוציאה לאור משחקים בעברית.", link: "https://www.pundak.co.il/", month: 0 },
        { name: "לארפ גלדיאטור", type: "organization", description: "המרכז הישראלי למשחקי לארפ. מארגן אירועים בארץ ובחו\"ל ומהווה מוקד ידע וציוד.", link: "https://www.larp-g.com/", month: 0 },
        { name: "פסטיבל אייקון", type: "event", description: "אירוע הדגל השנתי של קהילת חובבי הז'אנר, עם מתחם ענק למשחקי תפקידים, דוכנים ועוד.", link: "https://www.icon.org.il/", month: 10, location: "תל אביב" }, // October
        { name: "כנס דרקוניקון", type: "event", description: "כנס משחקי השולחן המוביל בישראל, מתקיים באוגוסט ומציע מגוון עצום של משחקים למתחילים וותיקים.", link: "https://dragoncon.co.il/", month: 8, location: "תל אביב" },   // August
        { name: "לארפ ליברה", type: "event", description: "אירוע לארפ ותיק עם דגש על סיפור מתמשך ועולם עשיר בו השחקנים מעצבים את העלילה.", link: "https://libra.co.il/", month: 10, location: "פארק מקורות הירקון" },         // October
        { name: "כנס כרמיקון", type: "event", description: "כנס משחקי תפקידים ופנטזיה המתקיים בכרמיאל, עם דגש על קהילת הצפון.", link: "https://karmicon.roleplay.org.il/index.html", month: 12, location: "כרמיאל" }, // December
        { name: "כנס דורות", type: "event", description: "כנס שנתי למדע בדיוני, פנטזיה ומשחקי תפקידים, המציע מגוון פעילויות והרצאות.", link: "https://dorot-con.org.il/", month: 3, location: "משתנה" },       // March
        { name: "שחקני תפקידים בישראל (פייסבוק)", type: "group", description: "הקבוצה הגדולה והפעילה ביותר לדיונים, שיתוף, ומציאת קבוצות משחק.", link: "https://www.facebook.com/share/g/1BATncAQvh/", month: 0 },
        { name: "משחקי תפקידים בישראל (פייסבוק)", type: "group", description: "הקבוצה השנייה הגדולה והפעילה ביותר לדיונים, שיתוף, ומציאת קבוצות משחק.", link: "https://www.facebook.com/share/g/16e153ZhEJ/", month: 0 },
        { name: "לארפ ישראל (פייסבוק)", type: "group", description: "הקבוצה המרכזית של קהילת הלארפ לדיונים, עדכונים על אירועים ותיאומים.", link: "https://www.facebook.com/groups/israelilarp", month: 0 },
        { name: "פורום חיפוש שחקנים בפונדק", type: "group", description: "לוח המודעות הוותיק והיעיל ביותר למציאת קבוצת משחק לפי אזור גיאוגרפי.", link: "https://www.pundak.co.il/forums/%D7%97%D7%99%D7%A4%D7%95%D7%A9-%D7%A9%D7%97%D7%A7%D7%A0%D7%99%D7%9D-%D7%9E%D7%A0%D7%97%D7%99%D7%9D-%D7%95%D7%A7%D7%91%D7%95%D7%A6%D7%95%D7%AA-%D7%9E%D7%A9%D7%97%D7%A7%D7%99-%D7%AA%D7%A4%D7%A7%D7%99%D7%93%D7%99%D7%9D.31/", month: 0 },
        { name: "רולפליירים בירושלים", type: "group", description: "קבוצת פייסבוק ייעודית לחיפוש קבוצות ואירועים באזור ירושלים.", link: "https://www.facebook.com/share/g/15fN96jBnU/", month: 0 },
        { name: "ממלכות הצפון - לאצבע הגליל והגולן", type: "group", description: "קבוצת פייסבוק לקהילת משחקי התפקידים באצבע הגליל והגולן.", link: "https://www.facebook.com/groups/1628946144025403/", month: 0 },
        { name: "רוחות הדרום - מועדון משחקי התפקידים של באר שבע", type: "group", description: "קבוצת פייסבוק למועדון משחקי התפקידים של באר שבע והסביבה.", link: "https://www.facebook.com/WindsoftheSouth", month: 0 }
    ];

    const resourcesData = [
        { name: "פריק (Freak)", type: "business", location: "תל אביב (דיזנגוף סנטר)", description: "חנות משחקים וקהילה בדיזנגוף-סנטר המציעה מגוון רחב של משחקי תפקידים, קלפים ולוח.", link: "https://www.freak-tlv.com/" },
        { name: "DRIX חיפה", type: "business", location: "חיפה", description: "בית קפה למשחקים עם חדר משחקי תפקידים ייעודי וספריית משחקי לוח ענקית.", link: "https://www.drixhaifa.com/" },
        { name: "Rooms & Realms", type: "business", location: "רחובות", description: "מציע חדר RPG ייעודי ומעוצב לחוויית משחק סוחפת.", link: "https://www.roomsandrealms.com/" },
        { name: "לארפ גלדיאטור (LARP Gladiator)", type: "business", location: "ישראל (מרכז)", description: "ארגון אירועי לארפ בישראל ובעולם וגם מקור לציוד ותחפושות לארפ.", link: "https://www.larp-g.com/" },
        { name: "הגובלין החכם (Wise Goblin)", type: "business", location: "ראשון לציון, הרצליה", description: "חדרי משחק מעוצבים עם מוזיקה, תאורה ומסך אינטראקטיבי, אלפי מיניאטורות ותפאורה, מנחים מקצועיים, שירותי הדפסת תלת מימד, חנות לציוד (מיניאטורות, קוביות, מפות, מגדלי קוביות).", link: "https://wisegoblin.com/" },
        { name: "iNexus", type: "business", location: "ראשון לציון", description: "חנות המתמחה במוצרי משחקי תפקידים, משחקי קלפים ואביזרים.", link: "https://www.inexus.co.il/" },
        { name: "הממלכה", type: "business", location: "הוד השרון", description: "חנות משחקים וקהילה המציעה מגוון רחב של משחקי תפקידים, קלפים ולוח.", link: "https://thekingdom.co.il/" },
        { name: "קרן השפע (Keren HaShefa)", type: "kids", location: "גוש דן", description: "יוצרת הרפתקאות משחקי תפקידים, מפעילה קייטנות דמיון, הפעלות לימי הולדת ולילדי עובדים.", link: "https://xn----8hc5aojohl.co.il/" },
        { name: "שושנת המדבר (Shoshanat HaMidbar)", type: "kids", location: "צפון הארץ", description: "מפעילה חוגי העשרה במגוון רחב של שיטות בבתי ספר ומתנ\"סים.", link: "https://hashoshana.co.il/" },
        { name: "הבקתה משחקי תפקידים", type: "kids", location: "קדימה", description: "מרכז חוגים וקהילה לילדים ונוער עם דגש על העצמה ומיומנויות חברתיות.", link: "https://www.habiktamt.com/" },
        { name: "שער הדמיון", type: "kids", location: "אזור השרון", description: "חוגי משחקי תפקידים בקבוצות קטנות עם מנחים מנוסים, תוך דגש על פיתוח כישורים.", link: "https://dramaplay.co.il/" },
        { name: "MYDM", type: "kids", location: "שפלת יהודה", description: "חוגי משחקי תפקידים לילדים ונוער, דגש על פיתוח יצירתיות ומיומנויות חברתיות.", link: "https://www.facebook.com/MosheYaminDongeonMaster/" }
    ];

    const systemsContainer = document.getElementById('systems-container');
    systemsData.forEach(system => {
        const card = document.createElement('div');
        card.className = 'card bg-white rounded-lg shadow-lg border border-stone-200 overflow-hidden';
        card.innerHTML = `
            <div class="p-6 cursor-pointer" onclick="toggleDetails(this)">
                <h3 class="text-2xl font-bold text-gray-800 mb-2">
                    <a href="${system.link}" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-600">${system.name}</a>
                </h3>
                <p class="text-lg text-stone-600">${system.description}</p>
                 <div class="flex items-center justify-end mt-4 text-base font-semibold text-indigo-600">
                    <span>לפרטים נוספים</span>
                    <svg class="w-4 h-4 mr-2 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
            </div>
            <div class="details-content bg-gray-50">
                <div class="p-6 border-t border-gray-200">
                    <h4 class="font-bold text-lg text-gray-700 mb-2">למה זה טוב למתחילים?</h4>
                    <p class="text-base text-stone-600">${system.why}</p>
                </div>
            </div>
        `;
        systemsContainer.appendChild(card);
    });

    const communityContainer = document.getElementById('community-container');
    const resourcesContainer = document.getElementById('resources-container');
    const closestEventContainer = document.getElementById('closest-event-container');

    function createCard(item) {
        let typeLabel = '';
        let typeColor = '';
        switch(item.type) {
            case 'organization': typeLabel = 'ארגון'; typeColor = 'bg-blue-100 text-blue-800'; break;
            case 'event': typeLabel = 'אירוע/כנס'; typeColor = 'bg-purple-100 text-purple-800'; break;
            case 'group': typeLabel = 'קבוצת אונליין'; typeColor = 'bg-green-100 text-green-800'; break;
            case 'business': typeLabel = 'עסק/חנות'; typeColor = 'bg-yellow-100 text-yellow-800'; break;
            case 'kids': typeLabel = 'חוגי ילדים'; typeColor = 'bg-pink-100 text-pink-800'; break;
        }
        
        return `
            <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-indigo-400">
                <div class="flex justify-between items-start">
                    <h3 class="text-xl font-bold text-stone-800 mb-2">${item.name}</h3>
                    <span class="text-sm font-semibold px-2 py-1 rounded-full ${typeColor}">${typeLabel}</span>
                </div>
                ${item.location ? `<p class="text-base text-stone-500 mb-2 font-semibold">📍 ${item.location}</p>` : ''}
                <p class="text-base text-stone-600">${item.description}</p>
            </a>
        `;
    }

    function calculateRelevance(item, query) {
        const lowerQuery = query.toLowerCase();
        let score = 0;

        // Exact match on name
        if (item.name.toLowerCase() === lowerQuery) {
            score += 100;
        }
        // Name starts with
        if (item.name.toLowerCase().startsWith(lowerQuery)) {
            score += 50;
        }
        // Name contains
        if (item.name.toLowerCase().includes(lowerQuery)) {
            score += 20;
        }
        // Description contains
        if (item.description.toLowerCase().includes(lowerQuery)) {
            score += 10;
        }
        // Location contains (if applicable)
        if (item.location && item.location.toLowerCase().includes(lowerQuery)) {
            score += 5;
        }
        return score;
    }

    function setupFilterAndLoadMore(containerId, data, buttonClass, searchInputId, loadMoreBtnId, collapseBtnId) {
        const container = document.getElementById(containerId);
        const buttons = document.querySelectorAll(`.${buttonClass}`);
        const searchInput = document.getElementById(searchInputId);
        const loadMoreBtn = document.getElementById(loadMoreBtnId);
        const collapseBtn = document.getElementById(collapseBtnId); // Get the new collapse button

        let currentFilter = 'all';
        let currentLimit = 6; // Initial limit for display

        function updateDisplay() {
            let filteredData = data;

            if (currentFilter !== 'all') {
                filteredData = data.filter(item => item.type === currentFilter);
            }

            if (searchInput.value) {
                const query = searchInput.value.toLowerCase();
                filteredData = filteredData
                    .map(item => ({ item, score: calculateRelevance(item, query) }))
                    .filter(entry => entry.score > 0)
                    .sort((a, b) => b.score - a.score)
                    .map(entry => entry.item);
            }

            const dataToRender = filteredData.slice(0, currentLimit);
            container.innerHTML = dataToRender.map(createCard).join('');

            // Show/hide load more button
            if (filteredData.length > currentLimit) {
                loadMoreBtn.classList.remove('hidden');
            } else {
                loadMoreBtn.classList.add('hidden');
            }

            // Show/hide collapse button
            if (filteredData.length > 6 && currentLimit >= filteredData.length) {
                collapseBtn.classList.remove('hidden');
            } else {
                collapseBtn.classList.add('hidden');
            }
        }

        buttons.forEach(button => {
            button.addEventListener('click', () => {
                currentFilter = button.dataset.filter;
                currentLimit = 6; // Reset limit when filter changes
                buttons.forEach(btn => btn.classList.remove('active', 'bg-indigo-600', 'text-white', 'bg-teal-600'));
                button.classList.add('active');
                if (buttonClass.includes('community')) {
                   button.classList.add('bg-indigo-600', 'text-white');
                } else {
                   button.classList.add('bg-teal-600', 'text-white');
                }
                updateDisplay();
            });
        });

        searchInput.addEventListener('input', () => {
            currentLimit = 6; // Reset limit when search changes
            updateDisplay();
        });

        loadMoreBtn.addEventListener('click', () => {
            currentLimit += 6; // Load 6 more items
            updateDisplay();
        });

        // Event listener for the new collapse button
        collapseBtn.addEventListener('click', () => {
            currentLimit = 6; // Reset to initial 6 items
            updateDisplay();
        });

        // Initial display
        updateDisplay();
    }

    setupFilterAndLoadMore('community-container', communityData, 'community-filter-btn', 'community-search', 'community-load-more-btn', 'community-collapse-btn');
    setupFilterAndLoadMore('resources-container', resourcesData, 'resources-filter-btn', 'resources-search', 'resources-load-more-btn', 'resources-collapse-btn');


    window.toggleDetails = function(element) {
        const content = element.nextElementSibling;
        const svg = element.querySelector('svg');
        if (content.style.maxHeight && content.style.maxHeight !== '0px') {
            content.style.maxHeight = '0px';
            svg.style.transform = 'rotate(0deg)';
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            svg.style.transform = 'rotate(180deg)';
        }
    }
    
    const ctx = document.getElementById('systemsChart').getContext('2d');
    const systemsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: systemsData.map(s => s.name),
            datasets: [{
                label: 'מורכבות חוקים (נמוך יותר = פשוט יותר)',
                data: systemsData.map(s => s.complexity),
                backgroundColor: systemsData.map(s => s.color),
                borderColor: systemsData.map(s => s.color.replace('0.7', '1')),
                borderWidth: 1,
                borderRadius: 5
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    beginAtZero: true,
                    max: 10,
                    grid: {
                        color: 'rgba(0,0,0,0.05)'
                    },
                    ticks: {
                       font: {
                           family: "'Assistant', sans-serif"
                       }
                    }
                },
                y: {
                     grid: {
                        display: false
                    },
                    ticks: {
                       font: {
                           family: "'Assistant', sans-serif",
                           size: 14, /* Increased from 13 */
                       },
                       autoSkip: false
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    rtl: true,
                    bodyFont: {
                        family: "'Assistant', sans-serif",
                    },
                    titleFont: {
                         family: "'Assistant', sans-serif",
                    }
                }
            }
        }
    });

    document.getElementById('mobile-nav').addEventListener('change', function() {
        window.location.hash = this.value;
    });

    // Contact section logic
    const contactButtons = document.querySelectorAll('.contact-btn');
    const gmailOutlookForm = document.getElementById('gmail-outlook-form');
    const otherEmailInfo = document.getElementById('other-email-info');
    const emailBodyTextarea = document.getElementById('email-body-textarea');
    const sendEmailBtn = document.getElementById('send-email-btn');

    let currentContactPlatform = 'gmail'; // Default active platform

    function updateContactForm() {
        contactButtons.forEach(btn => btn.classList.remove('active', 'bg-purple-600', 'text-white'));
        document.querySelector(`.contact-btn[data-platform="${currentContactPlatform}"]`).classList.add('active', 'bg-purple-600', 'text-white');

        if (currentContactPlatform === 'gmail' || currentContactPlatform === 'outlook') {
            gmailOutlookForm.classList.remove('hidden');
            otherEmailInfo.classList.add('hidden');
        } else {
            gmailOutlookForm.classList.add('hidden');
            otherEmailInfo.classList.remove('hidden');
        }
    }

    contactButtons.forEach(button => {
        button.addEventListener('click', () => {
            currentContactPlatform = button.dataset.platform;
            updateContactForm();
        });
    });

    sendEmailBtn.addEventListener('click', () => {
        const subject = "פנייה בנושא לאתר שער הרפתקה";
        const recipient = "gate@rrpg.top";
        const body = emailBodyTextarea.value;
        let emailLink = '';

        if (currentContactPlatform === 'gmail') {
            emailLink = `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(recipient)}&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        } else if (currentContactPlatform === 'outlook') {
            emailLink = `https://outlook.live.com/mail/0/deeplink/compose?to=${encodeURIComponent(recipient)}&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        } else { // Fallback for 'other' or if something goes wrong
            emailLink = `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }
        window.open(emailLink, '_blank');
    });

    // Initialize the contact form on page load
    updateContactForm();

    // Closest Event Logic
    function getClosestEvent() {
        const now = new Date();
        const currentMonth = now.getMonth() + 1; // getMonth() is 0-indexed
        const currentYear = now.getFullYear();

        const events = communityData.filter(item => item.type === 'event' && item.month !== 0);

        let closestEvent = null;
        let minTimeDiff = Infinity;

        events.forEach(event => {
            let eventYear = currentYear;
            // If the event month has already passed this year, consider it for next year
            if (event.month < currentMonth) {
                eventYear++;
            }
            
            // Create a date object for the event (using day 1 for simplicity, as only month matters)
            const eventDate = new Date(eventYear, event.month - 1, 1); // month is 0-indexed for Date constructor

            const timeDiff = eventDate.getTime() - now.getTime();

            // Ensure the event is in the future or current month
            if (timeDiff >= 0 && timeDiff < minTimeDiff) {
                minTimeDiff = timeDiff;
                closestEvent = event;
            }
        });

        // Fallback: If no future event found (e.g., all events for this year have passed),
        // find the earliest event for next year.
        if (!closestEvent && events.length > 0) { // Only fallback if there are events at all
            minTimeDiff = Infinity;
            events.forEach(event => {
                const eventDate = new Date(currentYear + 1, event.month - 1, 1);
                const timeDiff = eventDate.getTime() - now.getTime();
                if (timeDiff < minTimeDiff) {
                    minTimeDiff = timeDiff;
                    closestEvent = event;
                }
            });
        }
        return closestEvent;
    }

    function renderClosestEvent() {
        const closest = getClosestEvent();
        if (closest) {
            const monthNames = ["ינואר", "פברואר", "מרץ", "אפריל", "מאי", "יוני", "יולי", "אוגוסט", "ספטמבר", "אוקטובר", "נובמבר", "דצמבר"];
            const closestMonthName = monthNames[closest.month - 1];
            closestEventContainer.innerHTML = `
                <a href="${closest.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-purple-400 text-center">
                    <h3 class="text-xl font-bold text-stone-800 mb-2">${closest.name}</h3>
                    <p class="text-lg text-stone-600 mb-2">מתקיים בחודש: <span class="font-semibold text-purple-700">${closestMonthName}</span></p>
                    ${closest.location ? `<p class="text-base text-stone-600 mb-2">מיקום: ${closest.location}</p>` : ''}
                    <p class="text-base text-stone-600 mb-4">${closest.description}</p>
                    <p class="text-base text-stone-500">לחצו לפרטים נוספים</p>
                </a>
            `;
        } else {
            closestEventContainer.innerHTML = `<p class="text-base text-center text-stone-600">אין כנסים קרובים זמינים כרגע.</p>`;
        }
    }

    renderClosestEvent();

});
</script>
</body>
</html>
